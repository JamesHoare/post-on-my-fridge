(function(a){if(typeof define==="function"&&define.amd){if(typeof jQuery!=="undefined"){define(["jquery"],a)}else{define([],a)}}else{if(typeof jQuery!=="undefined"){a(jQuery)}else{a()}}})(function(a,b){function i(a,b){var c=decodeURI(a),e=f[b||false?"strict":"loose"].exec(c),g={attr:{},param:{},seg:{}},h=14;while(h--){g.attr[d[h]]=e[h]||""}g.param["query"]=n(g.attr["query"]);g.param["fragment"]=n(g.attr["fragment"]);g.seg["path"]=g.attr.path.replace(/^\/+|\/+$/g,"").split("/");g.seg["fragment"]=g.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");g.attr["base"]=g.attr.host?(g.attr.protocol?g.attr.protocol+"://"+g.attr.host:g.attr.host)+(g.attr.port?":"+g.attr.port:""):"";return g}function j(a){var b=a.tagName;if(typeof b!=="undefined")return c[b.toLowerCase()];return b}function k(a,b){if(a[b].length==0)return a[b]={};var c={};for(var d in a[b])c[d]=a[b][d];a[b]=c;return c}function l(a,b,c,d){var e=a.shift();if(!e){if(r(b[c])){b[c].push(d)}else if("object"==typeof b[c]){b[c]=d}else if("undefined"==typeof b[c]){b[c]=d}else{b[c]=[b[c],d]}}else{var f=b[c]=b[c]||[];if("]"==e){if(r(f)){if(""!=d)f.push(d)}else if("object"==typeof f){f[s(f).length]=d}else{f=b[c]=[b[c],d]}}else if(~e.indexOf("]")){e=e.substr(0,e.length-1);if(!h.test(e)&&r(f))f=k(b,c);l(a,f,e,d)}else{if(!h.test(e)&&r(f))f=k(b,c);l(a,f,e,d)}}}function m(a,b,c){if(~b.indexOf("]")){var d=b.split("["),e=d.length,f=e-1;l(d,a,"base",c)}else{if(!h.test(b)&&r(a.base)){var g={};for(var i in a.base)g[i]=a.base[i];a.base=g}o(a.base,b,c)}return a}function n(a){return q(String(a).split(/&|;/),function(a,b){try{b=decodeURIComponent(b.replace(/\+/g," "))}catch(c){}var d=b.indexOf("="),e=p(b),f=b.substr(0,e||d),g=b.substr(e||d,b.length),g=g.substr(g.indexOf("=")+1,g.length);if(""==f)f=b,g="";return m(a,f,g)},{base:{}}).base}function o(a,c,d){var e=a[c];if(b===e){a[c]=d}else if(r(e)){e.push(d)}else{a[c]=[e,d]}}function p(a){var b=a.length,c,d;for(var e=0;e<b;++e){d=a[e];if("]"==d)c=false;if("["==d)c=true;if("="==d&&!c)return e}}function q(a,c){var d=0,e=a.length>>0,f=arguments[2];while(d<e){if(d in a)f=c.call(b,f,a[d],d,a);++d}return f}function r(a){return Object.prototype.toString.call(a)==="[object Array]"}function s(a){var b=[];for(prop in a){if(a.hasOwnProperty(prop))b.push(prop)}return b}function t(a,c){if(arguments.length===1&&a===true){c=true;a=b}c=c||false;a=a||window.location.toString();return{data:i(a,c),attr:function(a){a=e[a]||a;return typeof a!=="undefined"?this.data.attr[a]:this.data.attr},param:function(a){return typeof a!=="undefined"?this.data.param.query[a]:this.data.param.query},fparam:function(a){return typeof a!=="undefined"?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){if(typeof a==="undefined"){return this.data.seg.path}else{a=a<0?this.data.seg.path.length+a:a-1;return this.data.seg.path[a]}},fsegment:function(a){if(typeof a==="undefined"){return this.data.seg.fragment}else{a=a<0?this.data.seg.fragment.length+a:a-1;return this.data.seg.fragment[a]}}}}var c={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],e={anchor:"fragment"},f={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},g=Object.prototype.toString,h=/^[0-9]+$/;if(typeof a!=="undefined"){a.fn.url=function(b){var c="";if(this.length){c=a(this).attr(j(this[0]))||""}return t(c,b)};a.url=t}else{window.purl=t}})