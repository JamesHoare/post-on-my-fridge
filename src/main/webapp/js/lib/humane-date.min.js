function humaneDate(a,b){function h(a,b){var c=.1;if(a>=b&&a<=b*(1+c)){return b}return a}if(!a){return}var c={ago:"ago",from:"",now:"just now",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",week:"week",weeks:"weeks",month:"month",months:"months",year:"year",years:"years"},d=[[60,c.now],[3600,c.minute,c.minutes,60],[86400,c.hour,c.hours,3600],[604800,c.day,c.days,86400],[2628e3,c.week,c.weeks,604800],[31536e3,c.month,c.months,2628e3],[Infinity,c.year,c.years,31536e3]],e=typeof a=="string",a=e?new Date((""+a).replace(/-/g,"/").replace(/[TZ]/g," ")):a,b=b||new Date,f=(b-a+(b.getTimezoneOffset()-(e?0:a.getTimezoneOffset()))*6e4)/1e3,g;if(f<0){f=Math.abs(f);g=c.from?" "+c.from:""}else{g=c.ago?" "+c.ago:""}for(var i=0,j=d[0];d[i];j=d[++i]){if(f<j[0]){if(i===0){return j[1]}var k=Math.ceil(h(f,j[3])/j[3]);return k+" "+(k!=1?j[2]:j[1])+(i>0?g:"")}}}if(typeof jQuery!="undefined"){jQuery.fn.humaneDates=function(a){var b=jQuery.extend({lowercase:false},a);return this.each(function(){var a=jQuery(this),c=a.attr("datetime")||a.attr("title");c=humaneDate(c);if(c&&b["lowercase"]){c=c.toLowerCase()}if(c&&a.html()!=c){a.html(c)}})}}